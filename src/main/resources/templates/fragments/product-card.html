<!--
  product-card fragment
  =====================
  사용 예:
  <th:block th:replace="fragments/product-card :: productCard(${p})"></th:block>

  p 객체 필드 예시:
  - p.id
  - p.title
  - p.price
  - p.imageUrl
  - p.location
  - p.timeAgo
  - p.reserved (boolean)
-->

<th:block th:fragment="card(card)">

  <article class="product-card">

    <!-- =====================
         Image Area
    ====================== -->
    <div class="product-card__image">

      <!-- 찜 버튼 (STEP 2에서 Ajax 연결 예정) -->
	  <button type="button"
	          class="product-card__like-btn"
	          th:classappend="${card.liked} ? ' liked' : ''"
	          th:data-product-id="${card.id}"
	          aria-label="찜하기">

	      <span class="material-symbols-outlined"
	            th:classappend="${card.liked} ? ' filled' : ''">
	          favorite
	      </span>
	  </button>


      <!-- 상품 링크 -->
      <a th:href="@{/product/{id}(id=${card.id})}">

        <!-- 상품 이미지 -->
        <img th:if="${card.img != null}"
             th:src="${card.img}"
             alt="상품 이미지"
             loading="lazy"/>

        <img th:if="${card.img == null}"
             src="/images/no-image.png"
             alt="기본 이미지"
             loading="lazy"/>

      </a>
    </div>

    <!-- =====================
         Content Area
    ====================== -->
    <div class="product-card__body">

      <!-- 제목 -->
      <h4 class="product-card__title"
          th:text="${card.title}">
        상품 제목
      </h4>

      <!-- 가격 -->
      <p class="product-card__price"
         th:text="${#numbers.formatInteger(card.price, 3, 'COMMA')} + '원'">
        100,000원
      </p>

	  <!-- 메타 정보 -->
	  <div class="product-card__meta">

	    <!-- 지역 -->
	    <span th:text="${card.loc}">지역</span>
	    <span class="meta-dot">·</span>

	    <!-- 시간 -->
	    <span th:text="${card.time}">시간</span>
	    <span class="meta-dot">·</span>
		
		<button type="button"
		        class="product-card__like-btn"
		        th:classappend="${card.liked} ? ' liked' : ''"
		        th:data-product-id="${card.id}"
		        aria-label="찜하기">

		    <span class="material-symbols-outlined"
		          th:classappend="${card.liked} ? ' filled' : ''">
		        favorite
		    </span>
		</button>

		    <span class="like-count"
		          th:text="${card.likeCount}">
		        0
		    </span>
		
      </div>

    </div>

  </article>

</th:block>
