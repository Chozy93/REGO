<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itwillbs.mapper.MypageMapper">

    <select id="getMyPageInfo" resultType="com.itwillbs.dto.MyPageDTO">
        SELECT 
            u.user_id as userId,
            u.email,
            u.nickname,
            u.phone_number as phoneNumber,
            u.gender,
            u.profile_img as profileImg,
            u.created_at as createdAt,
            ua.address as address
        FROM users u
        LEFT JOIN user_address ua 
               ON u.user_id = ua.user_id 
              AND ua.is_default = 1
        WHERE u.email = #{email}
    </select>

</mapper>